dist: xenial

language: cpp

compiler:
  - gcc

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-7
      - libfreetype6-dev
      - libx11-dev
      - libxrandr-dev
      - libudev-dev
      - libglu1-mesa-dev
      - freeglut3-dev
      - mesa-common-dev
      - libflac-dev
      - libogg-dev
      - libvorbis-dev
      - libvorbisenc2
      - libvorbisfile3
      - libopenal-dev
      - libpthread-stubs0-dev
#      - protobuf-compiler
#      - libboost-all-dev
#      - libprotobuf-dev
#      - libprotoc-dev

before_install:
  - export CC=gcc-7
  - export CXX=g++-7

install:
  - source ci/travis/install-$TRAVIS_OS_NAME.sh
  - curl -L https://github.com/google/protobuf/releases/download/v3.6.1/protoc-3.6.1-linux-x86_64.zip -o /tmp/protoc.zip
  - unzip /tmp/protoc.zip -d "$HOME"/protoc
  - mkdir -p "$HOME"/src && ln -s "$HOME"/protoc "$HOME"/src/protobuf

env:
  - PATH=$HOME/protoc/bin:$PATH

script:
  - echo "Starting build in `pwd`"
  - mkdir build
  - cd build
  - cmake ..
  - make